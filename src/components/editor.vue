<template>
  <div v-if="editor" class="container border border-gray-400 rounded-lg overflow-hidden max-h-[600px]">

    <div class="overflow-y-auto max-h-[600px] ">
      <!-- Toolbar -->
      <div class="control-group sticky top-0 z-999">
        <div class="flex items-stratch justify-center gap-1 bg-black/90 py-1">

          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600"
            @click="editor.chain().focus().toggleHeading({ level: 1 }).run()"
            :class="{ 'is-active': editor.isActive('heading', { level: 1 }) }">
            <div>
              <svg width="20" height="14" viewBox="0 0 20 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M17.5142 10.84C17.5142 11.058 17.5109 11.2727 17.5042 11.484V12.137C17.5042 12.487 17.2202 12.771 16.8702 12.771H16.1372C15.9692 12.7707 15.8082 12.7038 15.6895 12.585C15.5709 12.4661 15.5042 12.305 15.5042 12.137C15.5042 11.907 15.5009 11.6893 15.4942 11.484V6.85C15.4942 6.672 15.5042 6.46767 15.5242 6.237C15.5509 5.999 15.5739 5.758 15.5932 5.514C15.6132 5.264 15.6232 5.02967 15.6232 4.811L15.5932 2.801C15.7512 2.769 15.9162 2.74933 16.0882 2.742C16.4014 2.72861 16.715 2.72861 17.0282 2.742C17.3132 2.754 17.5142 3.006 17.5142 3.291V10.84ZM14.4542 11.95C14.5802 11.95 14.7619 11.9563 14.9992 11.969C15.2372 11.9757 15.4189 11.979 15.5442 11.979H17.4842C17.6029 11.979 17.7875 11.9757 18.0382 11.969C18.2962 11.9557 18.4845 11.949 18.6032 11.949H19.2992C19.5432 11.949 19.7592 12.112 19.7812 12.355C19.8064 12.6351 19.8064 12.9169 19.7812 13.197C19.7582 13.437 19.5412 13.602 19.2992 13.602H13.7392C13.2562 13.602 12.8212 13.263 12.8212 12.781C12.8212 12.29 13.2572 11.949 13.7482 11.949H14.4552L14.4542 11.95ZM12.5942 6.623C12.3422 6.235 12.5882 5.765 12.9792 5.517C13.4971 5.1965 13.9786 4.82062 14.4152 4.396C14.9425 3.874 15.3352 3.34167 15.5932 2.801C16.0592 3.758 16.1562 4.937 15.4032 5.689C15.2931 5.79761 15.1779 5.90106 15.0582 5.999C14.6802 6.30367 14.2762 6.56967 13.8462 6.797C13.4182 7.023 12.8662 7.024 12.5942 6.623ZM3.2182 7.524H2.8912C2.7392 7.51733 2.5842 7.514 2.4262 7.514C2.31394 7.50856 2.20159 7.50523 2.0892 7.504C1.8912 7.504 1.68353 7.50733 1.4662 7.514C1.38459 7.51588 1.30343 7.50135 1.22753 7.47128C1.15163 7.44122 1.08254 7.39622 1.02435 7.33897C0.966159 7.28171 0.920054 7.21335 0.888766 7.13795C0.857478 7.06255 0.841643 6.98163 0.8422 6.9V6.336C0.8422 5.991 1.1222 5.711 1.4662 5.722C1.68353 5.72867 1.8912 5.732 2.0892 5.732H2.4262C2.5842 5.72533 2.7392 5.722 2.8912 5.722C3.0432 5.71533 3.1522 5.712 3.2182 5.712H6.5542C6.6202 5.712 6.7292 5.71533 6.8812 5.722C7.0392 5.722 7.1942 5.72533 7.3462 5.732H7.6832C7.8872 5.732 8.0952 5.72867 8.3072 5.722C8.38873 5.72026 8.46978 5.73489 8.54557 5.76501C8.62135 5.79514 8.69032 5.84016 8.7484 5.8974C8.80648 5.95464 8.8525 6.02295 8.88372 6.09829C8.91495 6.17362 8.93075 6.25445 8.9302 6.336V6.9C8.9302 7.245 8.6502 7.525 8.3072 7.514C8.0952 7.50733 7.8872 7.504 7.6832 7.504C7.6172 7.504 7.50487 7.50733 7.3462 7.514C7.1942 7.514 7.0392 7.51733 6.8812 7.524H3.2182ZM2.1092 13.074C2.1092 13.379 1.8892 13.641 1.5842 13.662C1.40315 13.6748 1.22171 13.6815 1.0402 13.682C0.8882 13.682 0.716534 13.6753 0.5252 13.662C0.379254 13.6493 0.243655 13.5814 0.146086 13.4721C0.0485173 13.3628 -0.00366246 13.2204 0.000200101 13.074V0.607C0.000200101 0.303 0.2212 0.041 0.5252 0.02C0.7172 0.00666665 0.888867 0 1.0402 0C1.2122 0 1.39353 0.00666665 1.5842 0.02C1.72997 0.032679 1.86542 0.100453 1.96296 0.209516C2.06051 0.318578 2.1128 0.460725 2.1092 0.607V4.267C2.1092 4.54433 2.10587 4.79167 2.0992 5.009C2.09253 5.227 2.0892 5.468 2.0892 5.732V7.504C2.0892 7.768 2.09253 8.009 2.0992 8.227C2.10587 8.445 2.1092 8.69233 2.1092 8.969V13.074ZM7.6632 8.969C7.6632 8.69233 7.66653 8.445 7.6732 8.227C7.67987 8.009 7.6832 7.768 7.6832 7.504V5.732C7.6832 5.468 7.67987 5.227 7.6732 5.009C7.66653 4.791 7.6632 4.54367 7.6632 4.267V0.597C7.6632 0.298 7.8792 0.041 8.1782 0.02C8.36953 0.00666665 8.54453 0 8.7032 0C8.8612 0 9.03587 0.00666665 9.2272 0.02C9.37828 0.0326978 9.51881 0.102589 9.6201 0.2154C9.72139 0.328211 9.77579 0.475432 9.7722 0.627V13.064C9.7722 13.374 9.5462 13.64 9.2372 13.662C8.88438 13.6888 8.53003 13.6888 8.1772 13.662C8.03418 13.6489 7.90151 13.5818 7.80606 13.4745C7.71062 13.3672 7.65955 13.2276 7.6632 13.084V8.97V8.969Z"
                  fill="white" />
              </svg>
            </div>
          </button>
          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600"
            @click="editor.chain().focus().toggleHeading({ level: 2 }).run()"
            :class="{ 'is-active': editor.isActive('heading', { level: 2 }) }">
            <div>
              <svg width="20" height="14" viewBox="0 0 20 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M12.9992 5.564C12.5472 5.338 12.4712 4.767 12.7392 4.339C13.126 3.70939 13.6879 3.20619 14.3562 2.891C14.862 2.64705 15.4178 2.5248 15.9792 2.534C16.6992 2.534 17.3192 2.67933 17.8392 2.97C18.3679 3.254 18.7742 3.64333 19.0582 4.138C19.3482 4.62667 19.4932 5.178 19.4932 5.792C19.4932 6.28667 19.3909 6.73867 19.1862 7.148C18.9823 7.56009 18.715 7.93767 18.3942 8.267C18.0709 8.61033 17.7242 8.93033 17.3542 9.227L15.9492 10.346C15.5005 10.696 15.1242 11.0393 14.8202 11.376C14.5169 11.7053 14.3652 11.9723 14.3652 12.177L14.3492 12.637C14.3404 12.8963 14.2311 13.142 14.0446 13.3222C13.858 13.5025 13.6086 13.6032 13.3492 13.603C13.2493 13.6071 13.1495 13.5915 13.0557 13.557C12.9618 13.5225 12.8757 13.4698 12.8022 13.402C12.7645 13.3643 12.7278 13.3256 12.6922 13.286C12.5727 13.1441 12.4665 12.9915 12.3752 12.83C12.2964 12.6908 12.2522 12.5348 12.2462 12.375C12.2462 12.0523 12.3485 11.709 12.5532 11.345C12.7579 10.9757 13.0252 10.6097 13.3552 10.247C13.6919 9.88433 14.0519 9.54433 14.4352 9.227L16.1872 7.762C16.5286 7.50126 16.8257 7.18724 17.0672 6.832C17.2852 6.502 17.3942 6.152 17.3942 5.782C17.399 5.57833 17.3623 5.37581 17.2864 5.1868C17.2104 4.99778 17.0967 4.82622 16.9522 4.68259C16.8077 4.53895 16.6355 4.42626 16.446 4.35137C16.2566 4.27648 16.0538 4.24097 15.8502 4.247C15.4026 4.24116 14.9699 4.40806 14.6422 4.713C14.5282 4.815 14.4225 4.92367 14.3252 5.039C13.9792 5.447 13.4852 5.789 12.9992 5.564ZM19.4142 11.85C19.6272 11.85 19.8002 12.023 19.7902 12.236C19.7844 12.3653 19.7744 12.4944 19.7602 12.623C19.7082 12.953 19.5765 13.2003 19.3652 13.365C19.1532 13.5237 18.8529 13.603 18.4642 13.603H13.7042C13.5512 13.603 13.4017 13.5575 13.2747 13.4722C13.1477 13.3868 13.049 13.2656 12.9912 13.124C12.8202 12.706 13.0452 12.232 13.4912 12.152C13.9117 12.0729 14.3355 12.0119 14.7612 11.969C15.1505 11.9223 15.5202 11.8927 15.8702 11.88C16.2202 11.86 16.5135 11.85 16.7502 11.85H19.4142ZM3.2182 7.524H2.8902C2.7382 7.51733 2.5832 7.514 2.4252 7.514C2.31294 7.50856 2.20059 7.50523 2.0882 7.504C1.8902 7.504 1.6822 7.50733 1.4642 7.514C1.38267 7.51574 1.30162 7.50111 1.22584 7.47099C1.15005 7.44086 1.08108 7.39584 1.023 7.3386C0.964918 7.28136 0.918903 7.21305 0.887677 7.13771C0.856451 7.06238 0.840647 6.98155 0.8412 6.9V6.336C0.8412 5.992 1.1202 5.711 1.4642 5.722C1.6822 5.72867 1.8902 5.732 2.0882 5.732H2.4252C2.5832 5.72533 2.7382 5.722 2.8902 5.722C3.04153 5.71533 3.15053 5.712 3.2172 5.712H6.5532C6.6192 5.712 6.7282 5.71533 6.8802 5.722C7.0382 5.722 7.1932 5.72533 7.3452 5.732H7.6822C7.8862 5.732 8.09387 5.72867 8.3052 5.722C8.38681 5.72013 8.46798 5.73465 8.54387 5.76472C8.61977 5.79478 8.68886 5.83978 8.74705 5.89703C8.80524 5.95429 8.85135 6.02265 8.88263 6.09805C8.91392 6.17345 8.92976 6.25437 8.9292 6.336V6.9C8.9292 7.245 8.6492 7.525 8.3052 7.514C8.0976 7.50743 7.88991 7.5041 7.6822 7.504C7.61553 7.504 7.5032 7.50733 7.3452 7.514C7.1932 7.514 7.0382 7.51733 6.8802 7.524H3.2182ZM2.1082 13.074C2.1082 13.379 1.8882 13.641 1.5842 13.662C1.40315 13.6748 1.22171 13.6815 1.0402 13.682C0.8882 13.682 0.716534 13.6753 0.5252 13.662C0.379254 13.6493 0.243655 13.5814 0.146086 13.4721C0.0485173 13.3628 -0.00366246 13.2204 0.000200101 13.074V0.608C0.000200101 0.303 0.2202 0.041 0.5252 0.02C0.716534 0.00666665 0.8882 0 1.0402 0C1.21153 0 1.39287 0.00666665 1.5842 0.02C1.73015 0.0326879 1.86575 0.100603 1.96331 0.20988C2.06088 0.319157 2.11306 0.461555 2.1092 0.608V4.267C2.1092 4.54433 2.10587 4.79167 2.0992 5.009C2.09253 5.22767 2.0882 5.46867 2.0882 5.732V7.504C2.0882 7.768 2.09253 8.009 2.0992 8.227C2.10587 8.445 2.1092 8.69233 2.1092 8.969L2.1082 13.074ZM7.6632 8.969C7.6632 8.69233 7.66653 8.445 7.6732 8.227C7.67987 8.009 7.6832 7.768 7.6832 7.504V5.732C7.6832 5.468 7.67987 5.227 7.6732 5.009C7.6662 4.76173 7.66286 4.51437 7.6632 4.267V0.597C7.6632 0.299 7.8792 0.041 8.1772 0.02C8.35193 0.00758721 8.52703 0.000916966 8.7022 0C8.86153 0 9.03653 0.00666665 9.2272 0.02C9.3781 0.0329386 9.51838 0.102934 9.61946 0.215719C9.72054 0.328505 9.77481 0.475591 9.7712 0.627V13.065C9.7712 13.375 9.5462 13.64 9.2372 13.662C8.88437 13.6888 8.53003 13.6888 8.1772 13.662C8.03418 13.6489 7.90151 13.5818 7.80607 13.4745C7.71062 13.3672 7.65955 13.2276 7.6632 13.084V8.969Z"
                  fill="white" />
              </svg>

            </div>
          </button>

          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600"
            @click="editor.chain().focus().toggleHeading({ level: 3 }).run()"
            :class="{ 'is-active': editor.isActive('heading', { level: 3 }) }">
            <div>
              <svg width="20" height="14" viewBox="0 0 20 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M3.21817 7.524H2.89017C2.73817 7.51733 2.58317 7.514 2.42517 7.514C2.31291 7.50856 2.20056 7.50523 2.08817 7.504C1.89017 7.504 1.68217 7.50733 1.46417 7.514C1.38273 7.51574 1.30176 7.50114 1.22604 7.47108C1.15033 7.44101 1.0814 7.39609 1.02334 7.33895C0.965267 7.28181 0.919231 7.21362 0.887945 7.13841C0.856658 7.06319 0.840756 6.98246 0.841175 6.901V6.337C0.841175 5.992 1.12017 5.712 1.46417 5.723C1.68217 5.72967 1.89017 5.733 2.08817 5.733H2.42517C2.58317 5.72633 2.73817 5.723 2.89017 5.723C3.04151 5.71633 3.15051 5.713 3.21717 5.713H6.55317C6.61917 5.713 6.72817 5.71633 6.88017 5.723C7.03817 5.723 7.19317 5.72633 7.34517 5.733H7.68217C7.88617 5.733 8.09384 5.72967 8.30517 5.723C8.3867 5.72113 8.46778 5.73562 8.54361 5.76563C8.61944 5.79563 8.68849 5.84054 8.74667 5.89769C8.80484 5.95484 8.85097 6.02307 8.88232 6.09836C8.91366 6.17364 8.9296 6.25445 8.92918 6.336V6.901C8.92918 7.245 8.64917 7.525 8.30517 7.514C8.09757 7.50743 7.88988 7.5041 7.68217 7.504C7.61551 7.504 7.50317 7.50733 7.34517 7.514C7.19317 7.514 7.03817 7.51733 6.88017 7.524H3.21817ZM2.10817 13.074C2.10817 13.379 1.88817 13.641 1.58417 13.662C1.40312 13.6748 1.22168 13.6815 1.04017 13.682C0.888175 13.682 0.716508 13.6753 0.525175 13.662C0.379406 13.6493 0.243953 13.5815 0.14641 13.4725C0.0488668 13.3634 -0.00342937 13.2213 0.000174626 13.075V0.608C0.000174626 0.303 0.220175 0.041 0.525175 0.02C0.716508 0.00666665 0.888175 0 1.04017 0C1.21151 0 1.39284 0.00666665 1.58417 0.02C1.73012 0.0326879 1.86572 0.100603 1.96329 0.20988C2.06086 0.319157 2.11304 0.461555 2.10917 0.608V4.268C2.10917 4.54467 2.10584 4.792 2.09917 5.01C2.09251 5.22733 2.08917 5.468 2.08917 5.732V7.505C2.08917 7.76833 2.09251 8.009 2.09917 8.227C2.10584 8.445 2.10917 8.69267 2.10917 8.97V13.075L2.10817 13.074ZM7.66317 8.97C7.66317 8.69267 7.66651 8.445 7.67317 8.227C7.67984 8.009 7.68317 7.768 7.68317 7.504V5.732C7.68317 5.468 7.67984 5.22733 7.67317 5.01C7.66651 4.792 7.66317 4.54433 7.66317 4.267V0.598C7.66317 0.298 7.87918 0.041 8.17718 0.02C8.35191 0.00758721 8.527 0.000916966 8.70218 0C8.86151 0 9.03651 0.00666665 9.22717 0.02C9.37807 0.0331879 9.51826 0.103429 9.61915 0.216403C9.72005 0.329377 9.77406 0.476579 9.77017 0.628V13.066C9.77017 13.376 9.54518 13.641 9.23618 13.663C8.88335 13.6898 8.529 13.6898 8.17618 13.663C8.03315 13.6499 7.90048 13.5828 7.80504 13.4755C7.7096 13.3682 7.65853 13.2286 7.66217 13.085V8.971L7.66317 8.97ZM17.6822 10.116C17.6822 9.588 17.5138 9.159 17.1772 8.829C16.8465 8.49233 16.3875 8.324 15.8002 8.324C15.6028 8.324 15.4018 8.34733 15.1972 8.394C14.8422 8.476 14.4452 8.494 14.2122 8.214C14.1826 8.17899 14.1543 8.14296 14.1272 8.106C13.8832 7.773 14.0572 7.292 14.3602 7.011C14.5862 6.802 14.8322 6.593 15.0972 6.549C15.6052 6.456 16.0812 6.988 16.5432 6.988C17.1232 6.988 17.6612 7.11667 18.1572 7.374C18.6518 7.624 19.0478 7.987 19.3452 8.463C19.6485 8.931 19.8002 9.495 19.8002 10.155C19.8002 10.9543 19.5988 11.6277 19.1962 12.175C18.7942 12.7157 18.2795 13.125 17.6522 13.403C17.0322 13.6737 16.3822 13.809 15.7022 13.809C15.0159 13.8159 14.3333 13.7087 13.6822 13.492C13.389 13.3938 13.1038 13.2731 12.8292 13.131C12.3892 12.903 12.1992 12.381 12.4542 11.957C12.7272 11.522 13.3042 11.539 13.7692 11.757C13.9025 11.819 14.0385 11.8757 14.1772 11.927C14.5932 12.079 15.0255 12.155 15.4742 12.155C16.0942 12.155 16.6155 11.9803 17.0382 11.631C17.4668 11.2743 17.6822 10.7693 17.6822 10.116ZM17.4642 6.304C17.0748 6.68067 16.6722 7.004 16.2562 7.274C15.9468 7.47861 15.6203 7.65595 15.2802 7.804C15.1432 7.86017 14.9907 7.86549 14.8502 7.819C14.7407 7.78413 14.6422 7.72145 14.5642 7.6371C14.4862 7.55276 14.4314 7.44962 14.4052 7.33777C14.379 7.22592 14.3823 7.10919 14.4147 6.99898C14.4471 6.88877 14.5076 6.78885 14.5902 6.709L15.9992 5.344C16.1372 5.206 16.3218 5.03767 16.5532 4.839C16.7658 4.66167 16.9412 4.52167 17.0792 4.419C17.0852 4.41449 17.0903 4.40881 17.094 4.4023C17.0978 4.39579 17.1002 4.38859 17.1012 4.38112C17.1021 4.37366 17.1015 4.36608 17.0995 4.35884C17.0974 4.3516 17.0939 4.34486 17.0892 4.339C17.0827 4.33189 17.0745 4.32645 17.0655 4.32314C17.0564 4.31984 17.0467 4.31876 17.0372 4.32C16.8471 4.34919 16.656 4.37054 16.4642 4.384C16.2062 4.404 15.9422 4.42067 15.6722 4.434C15.4082 4.44067 15.1838 4.444 14.9992 4.444H13.0332C12.7762 4.444 12.5362 4.281 12.4932 4.027C12.4813 3.92207 12.4749 3.81659 12.4742 3.711C12.4742 3.579 12.4842 3.427 12.5042 3.255C12.5532 2.938 12.8592 2.75 13.1802 2.75H18.2082C18.6382 2.75 19.0402 2.989 19.1862 3.394C19.2795 3.63133 19.3258 3.836 19.3252 4.008C19.3252 4.318 19.1798 4.608 18.8892 4.878L17.4642 6.304Z"
                  fill="white" />
              </svg>

            </div>
          </button>
          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600"
            @click="editor.chain().focus().setHardBreak().run()">
            <svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M18.9966 0.593624C18.9966 0.436185 18.9341 0.285195 18.8227 0.173868C18.7114 0.0625424 18.5604 0 18.403 0C18.2455 0 18.0946 0.0625424 17.9832 0.173868C17.8719 0.285195 17.8094 0.436185 17.8094 0.593624V4.74899H2.01896L5.75879 1.00916C5.86693 0.897202 5.92676 0.747251 5.92541 0.591605C5.92406 0.435959 5.86163 0.28707 5.75156 0.177008C5.6415 0.0669449 5.49261 0.00451414 5.33697 0.00316162C5.18132 0.00180909 5.03137 0.0616431 4.91941 0.169777L0.170418 4.91877C0.0591303 5.03009 -0.00338745 5.18105 -0.00338745 5.33846C-0.00338745 5.49587 0.0591303 5.64683 0.170418 5.75815L4.91941 10.5071C5.03137 10.6153 5.18132 10.6751 5.33697 10.6738C5.49261 10.6724 5.6415 10.61 5.75156 10.4999C5.86163 10.3899 5.92406 10.241 5.92541 10.0853C5.92676 9.92967 5.86693 9.77972 5.75879 9.66776L2.01896 5.92793H17.8094C18.1242 5.92793 18.4262 5.80285 18.6489 5.58019C18.8715 5.35754 18.9966 5.05556 18.9966 4.74068V0.585313V0.593624Z"
                fill="white" />
              <path
                d="M17.8094 13.0597H10.6859C10.0302 13.0597 9.49863 13.5912 9.49863 14.2469V17.8087C9.49863 18.4644 10.0302 18.9959 10.6859 18.9959H17.8094C18.4651 18.9959 18.9966 18.4644 18.9966 17.8087V14.2469C18.9966 13.5912 18.4651 13.0597 17.8094 13.0597Z"
                fill="white" />
              <path
                d="M11.2795 16.0279V11.8725C11.2795 11.0853 11.5922 10.3304 12.1488 9.77376C12.7055 9.21713 13.4604 8.90442 14.2476 8.90442C15.0348 8.90442 15.7897 9.21713 16.3464 9.77376C16.903 10.3304 17.2157 11.0853 17.2157 11.8725V16.0279"
                stroke="white" stroke-linecap="round" />
            </svg>
          </button>
          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600"
            @click="editor.chain().focus().toggleBold().run()" :class="{ 'is-active': editor.isActive('bold') }">
            <div>
              <svg width="16" height="14" viewBox="0 0 16 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M1.59957 0H8.79761C9.82542 0.000234774 10.8333 0.206772 11.7109 0.59699C12.5885 0.987207 13.3019 1.54605 13.773 2.21231C14.2441 2.87857 14.4547 3.62654 14.3818 4.3743C14.3089 5.12205 13.9552 5.84075 13.3596 6.45167C14.3928 6.92047 15.1883 7.62209 15.6258 8.45025C16.0633 9.2784 16.1188 10.188 15.7839 11.0412C15.449 11.8944 14.7421 12.6448 13.7701 13.1787C12.7981 13.7126 11.614 14.0009 10.3972 14H1.59957C1.17533 14 0.768478 13.8771 0.468502 13.6583C0.168525 13.4395 0 13.1428 0 12.8333V1.16667C0 0.857247 0.168525 0.560501 0.468502 0.341709C0.768478 0.122916 1.17533 0 1.59957 0ZM3.19913 8.16667V11.6667H10.3972C11.0335 11.6667 11.6438 11.4823 12.0938 11.1541C12.5437 10.8259 12.7965 10.3808 12.7965 9.91667C12.7965 9.45254 12.5437 9.00742 12.0938 8.67923C11.6438 8.35104 11.0335 8.16667 10.3972 8.16667H3.19913ZM8.79761 5.83333C9.43396 5.83333 10.0442 5.64896 10.4942 5.32077C10.9442 4.99258 11.197 4.54746 11.197 4.08333C11.197 3.6192 10.9442 3.17408 10.4942 2.8459C10.0442 2.51771 9.43396 2.33333 8.79761 2.33333H3.19913V5.83333H8.79761Z"
                  fill="white" />
              </svg>

            </div>
          </button>
          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600"
            @click="editor.chain().focus().toggleItalic().run()" :class="{ 'is-active': editor.isActive('italic') }">
            <div>
              <svg width="19" height="14" viewBox="0 0 19 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M17.8125 0C18.1274 0 18.4295 0.0737498 18.6522 0.205025C18.8749 0.336301 19 0.514348 19 0.7C19 0.885652 18.8749 1.0637 18.6522 1.19497C18.4295 1.32625 18.1274 1.4 17.8125 1.4H13.9199L7.58575 12.6H10.6875C11.0024 12.6 11.3045 12.6737 11.5272 12.805C11.7499 12.9363 11.875 13.1143 11.875 13.3C11.875 13.4857 11.7499 13.6637 11.5272 13.795C11.3045 13.9263 11.0024 14 10.6875 14H1.1875C0.872555 14 0.57051 13.9263 0.347811 13.795C0.125111 13.6637 0 13.4857 0 13.3C0 13.1143 0.125111 12.9363 0.347811 12.805C0.57051 12.6737 0.872555 12.6 1.1875 12.6H5.0825L11.4154 1.4H8.3125C7.99756 1.4 7.69551 1.32625 7.47281 1.19497C7.25011 1.0637 7.125 0.885652 7.125 0.7C7.125 0.514348 7.25011 0.336301 7.47281 0.205025C7.69551 0.0737498 7.99756 0 8.3125 0H17.8125Z"
                  fill="white" />
              </svg>

            </div>
          </button>
          <!-- Font Size -->
          <select v-model="currentFontSize" class="text-white bg-gray-500 rounded-lg px-1"
            @change="setFontSize($event.target.value)">
            <option disabled value="">Fs</option>
            <option v-for="size in fontSizes" :key="size" :value="size">
              {{ size }}
            </option>
          </select>

          <!-- Line Height -->
          <select v-model="currentLineHeight" class="text-white bg-gray-500 rounded-lg px-1"
            @change="setLineHeight($event.target.value)">
            <option disabled value="">
              Line Height
            </option>
            <option v-for="lh in lineHeights" :key="lh" :value="lh">
              {{ lh }}
            </option>
          </select>

          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600"
            @click="editor.chain().focus().setTextAlign('left').run()"
            :class="{ 'is-active': editor.isActive({ textAlign: 'left' }) }">
            <div>
              <svg width="19" height="17" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M0.95 1.88889H18.05C18.302 1.88889 18.5436 1.78938 18.7218 1.61227C18.8999 1.43515 19 1.19493 19 0.944444C19 0.693962 18.8999 0.453739 18.7218 0.276621C18.5436 0.0995036 18.302 0 18.05 0H0.95C0.698044 0 0.456408 0.0995036 0.278249 0.276621C0.100089 0.453739 0 0.693962 0 0.944444C0 1.19493 0.100089 1.43515 0.278249 1.61227C0.456408 1.78938 0.698044 1.88889 0.95 1.88889ZM12.35 15.1111H0.95C0.698044 15.1111 0.456408 15.2106 0.278249 15.3877C0.100089 15.5648 0 15.8051 0 16.0556C0 16.306 0.100089 16.5463 0.278249 16.7234C0.456408 16.9005 0.698044 17 0.95 17H12.35C12.602 17 12.8436 16.9005 13.0218 16.7234C13.1999 16.5463 13.3 16.306 13.3 16.0556C13.3 15.8051 13.1999 15.5648 13.0218 15.3877C12.8436 15.2106 12.602 15.1111 12.35 15.1111ZM18.05 7.55556H0.95C0.698044 7.55556 0.456408 7.65506 0.278249 7.83218C0.100089 8.00929 0 8.24952 0 8.5C0 8.75048 0.100089 8.9907 0.278249 9.16782C0.456408 9.34494 0.698044 9.44444 0.95 9.44444H18.05C18.302 9.44444 18.5436 9.34494 18.7218 9.16782C18.8999 8.9907 19 8.75048 19 8.5C19 8.24952 18.8999 8.00929 18.7218 7.83218C18.5436 7.65506 18.302 7.55556 18.05 7.55556ZM18.05 3.77778H0.95C0.698044 3.77778 0.456408 3.87728 0.278249 4.0544C0.100089 4.23152 0 4.47174 0 4.72222C0 4.9727 0.100089 5.21293 0.278249 5.39004C0.456408 5.56716 0.698044 5.66667 0.95 5.66667H18.05C18.302 5.66667 18.5436 5.56716 18.7218 5.39004C18.8999 5.21293 19 4.9727 19 4.72222C19 4.47174 18.8999 4.23152 18.7218 4.0544C18.5436 3.87728 18.302 3.77778 18.05 3.77778ZM18.05 11.3333H0.95C0.698044 11.3333 0.456408 11.4328 0.278249 11.61C0.100089 11.7871 0 12.0273 0 12.2778C0 12.5283 0.100089 12.7685 0.278249 12.9456C0.456408 13.1227 0.698044 13.2222 0.95 13.2222H18.05C18.302 13.2222 18.5436 13.1227 18.7218 12.9456C18.8999 12.7685 19 12.5283 19 12.2778C19 12.0273 18.8999 11.7871 18.7218 11.61C18.5436 11.4328 18.302 11.3333 18.05 11.3333Z"
                  fill="white" />
              </svg>

            </div>
          </button>
          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600"
            @click="editor.chain().focus().setTextAlign('center').run()"
            :class="{ 'is-active': editor.isActive({ textAlign: 'center' }) }">
            <div>
              <svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M14.5 13.3715C14.8852 13.3717 15.2556 13.5039 15.5344 13.7409C15.8132 13.9779 15.979 14.3014 15.9975 14.6444C16.016 14.9874 15.8858 15.3236 15.6338 15.5833C15.3818 15.8431 15.0274 16.0064 14.644 16.0396L14.5 16.0458H4.5C4.11478 16.0456 3.74441 15.9133 3.46561 15.6764C3.18682 15.4394 3.02099 15.1159 3.00248 14.7729C2.98396 14.4299 3.11419 14.0937 3.36618 13.834C3.61816 13.5742 3.97258 13.4109 4.356 13.3777L4.5 13.3715H14.5ZM17.5 8.91433C17.8978 8.91433 18.2794 9.05521 18.5607 9.30597C18.842 9.55673 19 9.89684 19 10.2515C19 10.6061 18.842 10.9462 18.5607 11.197C18.2794 11.4477 17.8978 11.5886 17.5 11.5886H1.5C1.10218 11.5886 0.720644 11.4477 0.43934 11.197C0.158035 10.9462 0 10.6061 0 10.2515C0 9.89684 0.158035 9.55673 0.43934 9.30597C0.720644 9.05521 1.10218 8.91433 1.5 8.91433H17.5ZM14.5 4.45716C14.8852 4.45733 15.2556 4.58961 15.5344 4.82658C15.8132 5.06355 15.979 5.38706 15.9975 5.73005C16.016 6.07305 15.8858 6.40925 15.6338 6.66899C15.3818 6.92873 15.0274 7.09209 14.644 7.12522L14.5 7.13146H4.5C4.11478 7.13129 3.74441 6.99902 3.46561 6.76205C3.18682 6.52507 3.02099 6.20157 3.00248 5.85857C2.98396 5.51557 3.11419 5.17938 3.36618 4.91964C3.61816 4.6599 3.97258 4.49654 4.356 4.4634L4.5 4.45716H14.5ZM17.5 0C17.8852 0.000170028 18.2556 0.132446 18.5344 0.369418C18.8132 0.60639 18.979 0.929892 18.9975 1.27289C19.016 1.61589 18.8858 1.95209 18.6338 2.21182C18.3818 2.47156 18.0274 2.63492 17.644 2.66806L17.5 2.6743H1.5C1.11478 2.67413 0.744405 2.54185 0.465613 2.30488C0.186821 2.06791 0.020988 1.74441 0.00247574 1.40141C-0.0160365 1.05841 0.114192 0.72221 0.366175 0.462474C0.618159 0.202737 0.972581 0.0393759 1.356 0.00624L1.5 0H17.5Z"
                  fill="white" />
              </svg>

            </div>
          </button>
          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600" @click="alignRight"
            :class="{ 'is-active': editor.isActive({ textAlign: 'right' }) }">
            <div>
              <svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M17.1 1.88889H0.9C0.661305 1.88889 0.432387 1.78938 0.263604 1.61227C0.0948211 1.43515 0 1.19493 0 0.944444C0 0.693962 0.0948211 0.453739 0.263604 0.276621C0.432387 0.0995036 0.661305 0 0.9 0H17.1C17.3387 0 17.5676 0.0995036 17.7364 0.276621C17.9052 0.453739 18 0.693962 18 0.944444C18 1.19493 17.9052 1.43515 17.7364 1.61227C17.5676 1.78938 17.3387 1.88889 17.1 1.88889ZM17.1 5.66667H0.9C0.661305 5.66667 0.432387 5.56716 0.263604 5.39004C0.0948211 5.21293 0 4.9727 0 4.72222C0 4.47174 0.0948211 4.23152 0.263604 4.0544C0.432387 3.87728 0.661305 3.77778 0.9 3.77778H17.1C17.3387 3.77778 17.5676 3.87728 17.7364 4.0544C17.9052 4.23152 18 4.47174 18 4.72222C18 4.9727 17.9052 5.21293 17.7364 5.39004C17.5676 5.56716 17.3387 5.66667 17.1 5.66667ZM17.1 9.44444H0.9C0.661305 9.44444 0.432387 9.34494 0.263604 9.16782C0.0948211 8.9907 0 8.75048 0 8.5C0 8.24952 0.0948211 8.00929 0.263604 7.83218C0.432387 7.65506 0.661305 7.55556 0.9 7.55556H17.1C17.3387 7.55556 17.5676 7.65506 17.7364 7.83218C17.9052 8.00929 18 8.24952 18 8.5C18 8.75048 17.9052 8.9907 17.7364 9.16782C17.5676 9.34494 17.3387 9.44444 17.1 9.44444ZM17.1 13.2222H0.9C0.661305 13.2222 0.432387 13.1227 0.263604 12.9456C0.0948211 12.7685 0 12.5283 0 12.2778C0 12.0273 0.0948211 11.7871 0.263604 11.61C0.432387 11.4328 0.661305 11.3333 0.9 11.3333H17.1C17.3387 11.3333 17.5676 11.4328 17.7364 11.61C17.9052 11.7871 18 12.0273 18 12.2778C18 12.5283 17.9052 12.7685 17.7364 12.9456C17.5676 13.1227 17.3387 13.2222 17.1 13.2222ZM17.1 17H8.1C7.8613 17 7.63239 16.9005 7.4636 16.7234C7.29482 16.5463 7.2 16.306 7.2 16.0556C7.2 15.8051 7.29482 15.5648 7.4636 15.3877C7.63239 15.2106 7.8613 15.1111 8.1 15.1111H17.1C17.3387 15.1111 17.5676 15.2106 17.7364 15.3877C17.9052 15.5648 18 15.8051 18 16.0556C18 16.306 17.9052 16.5463 17.7364 16.7234C17.5676 16.9005 17.3387 17 17.1 17Z"
                  fill="white" />
              </svg>

            </div>
          </button>
          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600"
            @click="editor.chain().focus().setTextAlign('justify').run()"
            :class="{ 'is-active': editor.isActive({ textAlign: 'justify' }) }">
            <div>
              <svg width="19" height="17" viewBox="0 0 19 17" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M0.831668 1.88912H18.1115L18.1355 1.88983C18.3648 1.88983 18.5847 1.79028 18.7468 1.61307C18.9089 1.43587 19 1.19552 19 0.944917C19 0.694309 18.9089 0.453966 18.7468 0.27676C18.5847 0.0995534 18.3648 0 18.1355 0L18.1102 0.000708333H18.1115H0.831668C0.608348 0.00998004 0.39699 0.113422 0.241932 0.289335C0.086875 0.465247 0.000167896 0.69996 2.43574e-07 0.944235C-0.000167409 1.18851 0.0862175 1.42336 0.241033 1.59953C0.395849 1.7757 0.607064 1.87949 0.830371 1.88912H0.831668ZM18.1115 3.77825H0.831668C0.608348 3.78752 0.39699 3.89096 0.241932 4.06688C0.086875 4.24279 0.000167896 4.4775 2.43574e-07 4.72178C-0.000167409 4.96605 0.0862175 5.20091 0.241033 5.37707C0.395849 5.55324 0.607064 5.65703 0.830371 5.66667H18.1115L18.1355 5.66738C18.3648 5.66738 18.5847 5.56782 18.7468 5.39062C18.9089 5.21341 19 4.97307 19 4.72246C19 4.47185 18.9089 4.23151 18.7468 4.0543C18.5847 3.8771 18.3648 3.77754 18.1355 3.77754L18.1102 3.77825H18.1115ZM18.1115 7.5565H0.831668C0.608348 7.56577 0.39699 7.66921 0.241932 7.84513C0.086875 8.02104 0.000167896 8.25575 2.43574e-07 8.50003C-0.000167409 8.7443 0.0862175 8.97916 0.241033 9.15532C0.395849 9.33149 0.607064 9.43528 0.830371 9.44492H18.1115C18.3349 9.43565 18.5462 9.3322 18.7013 9.15629C18.8563 8.98038 18.943 8.74567 18.9432 8.50139C18.9434 8.25711 18.857 8.02226 18.7022 7.84609C18.5474 7.66993 18.3361 7.56614 18.1128 7.5565H18.1115ZM18.1115 15.1116H0.831668C0.608348 15.1209 0.39699 15.2243 0.241932 15.4002C0.086875 15.5761 0.000167896 15.8108 2.43574e-07 16.0551C-0.000167409 16.2994 0.0862175 16.5342 0.241033 16.7104C0.395849 16.8866 0.607064 16.9904 0.830371 17H18.1115C18.3349 16.9907 18.5462 16.8873 18.7013 16.7114C18.8563 16.5355 18.943 16.3007 18.9432 16.0565C18.9434 15.8122 18.857 15.5773 18.7022 15.4012C18.5474 15.225 18.3361 15.1212 18.1128 15.1116H18.1115ZM18.1115 11.334H0.831668C0.608348 11.3433 0.39699 11.4468 0.241932 11.6227C0.086875 11.7986 0.000167896 12.0333 2.43574e-07 12.2776C-0.000167409 12.5218 0.0862175 12.7567 0.241033 12.9329C0.395849 13.109 0.607064 13.2128 0.830371 13.2225H18.1115C18.3349 13.2132 18.5462 13.1097 18.7013 12.9338C18.8563 12.7579 18.943 12.5232 18.9432 12.2789C18.9434 12.0347 18.857 11.7998 18.7022 11.6236C18.5474 11.4475 18.3361 11.3437 18.1128 11.334H18.1115Z"
                  fill="white" />
              </svg>
            </div>


          </button>

          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600"
            @click="editor.chain().focus().toggleBulletList().run()"
            :class="{ 'is-active': editor.isActive('bulletList') }">
            <div>
              <svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M7.38889 1.05556H17.9444C18.2244 1.05556 18.4929 1.16677 18.6908 1.36472C18.8888 1.56268 19 1.83116 19 2.11111C19 2.39106 18.8888 2.65955 18.6908 2.8575C18.4929 3.05546 18.2244 3.16667 17.9444 3.16667H7.38889C7.10894 3.16667 6.84045 3.05546 6.6425 2.8575C6.44454 2.65955 6.33333 2.39106 6.33333 2.11111C6.33333 1.83116 6.44454 1.56268 6.6425 1.36472C6.84045 1.16677 7.10894 1.05556 7.38889 1.05556ZM7.38889 8.44444H17.9444C18.2244 8.44444 18.4929 8.55565 18.6908 8.75361C18.8888 8.95156 19 9.22005 19 9.5C19 9.77995 18.8888 10.0484 18.6908 10.2464C18.4929 10.4443 18.2244 10.5556 17.9444 10.5556H7.38889C7.10894 10.5556 6.84045 10.4443 6.6425 10.2464C6.44454 10.0484 6.33333 9.77995 6.33333 9.5C6.33333 9.22005 6.44454 8.95156 6.6425 8.75361C6.84045 8.55565 7.10894 8.44444 7.38889 8.44444ZM7.38889 15.8333H17.9444C18.2244 15.8333 18.4929 15.9445 18.6908 16.1425C18.8888 16.3405 19 16.6089 19 16.8889C19 17.1688 18.8888 17.4373 18.6908 17.6353C18.4929 17.8332 18.2244 17.9444 17.9444 17.9444H7.38889C7.10894 17.9444 6.84045 17.8332 6.6425 17.6353C6.44454 17.4373 6.33333 17.1688 6.33333 16.8889C6.33333 16.6089 6.44454 16.3405 6.6425 16.1425C6.84045 15.9445 7.10894 15.8333 7.38889 15.8333ZM2.11111 4.22222C1.55121 4.22222 1.01424 3.9998 0.61833 3.60389C0.22242 3.20798 0 2.67101 0 2.11111C0 1.55121 0.22242 1.01424 0.61833 0.61833C1.01424 0.22242 1.55121 0 2.11111 0C2.67101 0 3.20798 0.22242 3.60389 0.61833C3.9998 1.01424 4.22222 1.55121 4.22222 2.11111C4.22222 2.67101 3.9998 3.20798 3.60389 3.60389C3.20798 3.9998 2.67101 4.22222 2.11111 4.22222ZM2.11111 11.6111C1.55121 11.6111 1.01424 11.3887 0.61833 10.9928C0.22242 10.5969 0 10.0599 0 9.5C0 8.9401 0.22242 8.40313 0.61833 8.00722C1.01424 7.61131 1.55121 7.38889 2.11111 7.38889C2.67101 7.38889 3.20798 7.61131 3.60389 8.00722C3.9998 8.40313 4.22222 8.9401 4.22222 9.5C4.22222 10.0599 3.9998 10.5969 3.60389 10.9928C3.20798 11.3887 2.67101 11.6111 2.11111 11.6111ZM2.11111 19C1.55121 19 1.01424 18.7776 0.61833 18.3817C0.22242 17.9858 0 17.4488 0 16.8889C0 16.329 0.22242 15.792 0.61833 15.3961C1.01424 15.0002 1.55121 14.7778 2.11111 14.7778C2.67101 14.7778 3.20798 15.0002 3.60389 15.3961C3.9998 15.792 4.22222 16.329 4.22222 16.8889C4.22222 17.4488 3.9998 17.9858 3.60389 18.3817C3.20798 18.7776 2.67101 19 2.11111 19Z"
                  fill="white" />
              </svg>

            </div>
          </button>
          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600"
            @click="editor.chain().focus().toggleOrderedList().run()"
            :class="{ 'is-active': editor.isActive('orderedList') }">
            <div>
              <svg width="19" height="20" viewBox="0 0 19 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M6.70588 1.11111H17.8824C18.1788 1.11111 18.4631 1.22817 18.6726 1.43655C18.8822 1.64492 19 1.92754 19 2.22222C19 2.51691 18.8822 2.79952 18.6726 3.0079C18.4631 3.21627 18.1788 3.33333 17.8824 3.33333H6.70588C6.40946 3.33333 6.12519 3.21627 5.91559 3.0079C5.70599 2.79952 5.58824 2.51691 5.58824 2.22222C5.58824 1.92754 5.70599 1.64492 5.91559 1.43655C6.12519 1.22817 6.40946 1.11111 6.70588 1.11111ZM6.70588 8.88889H17.8824C18.1788 8.88889 18.4631 9.00595 18.6726 9.21433C18.8822 9.4227 19 9.70532 19 10C19 10.2947 18.8822 10.5773 18.6726 10.7857C18.4631 10.994 18.1788 11.1111 17.8824 11.1111H6.70588C6.40946 11.1111 6.12519 10.994 5.91559 10.7857C5.70599 10.5773 5.58824 10.2947 5.58824 10C5.58824 9.70532 5.70599 9.4227 5.91559 9.21433C6.12519 9.00595 6.40946 8.88889 6.70588 8.88889ZM6.70588 16.6667H17.8824C18.1788 16.6667 18.4631 16.7837 18.6726 16.9921C18.8822 17.2005 19 17.4831 19 17.7778C19 18.0725 18.8822 18.3551 18.6726 18.5635C18.4631 18.7718 18.1788 18.8889 17.8824 18.8889H6.70588C6.40946 18.8889 6.12519 18.7718 5.91559 18.5635C5.70599 18.3551 5.58824 18.0725 5.58824 17.7778C5.58824 17.4831 5.70599 17.2005 5.91559 16.9921C6.12519 16.7837 6.40946 16.6667 6.70588 16.6667ZM0.558824 1.11111C0.410614 1.11111 0.268475 1.05258 0.163676 0.948393C0.058876 0.844206 0 0.702898 0 0.555556C0 0.408213 0.058876 0.266905 0.163676 0.162719C0.268475 0.0585317 0.410614 0 0.558824 0H1.67647C1.98941 0 2.23529 0.244444 2.23529 0.555556V3.88889C2.23529 4.03623 2.17642 4.17754 2.07162 4.28173C1.96682 4.38591 1.82468 4.44444 1.67647 4.44444C1.52826 4.44444 1.38612 4.38591 1.28132 4.28173C1.17652 4.17754 1.11765 4.03623 1.11765 3.88889V1.12778L0.558824 1.11111ZM0.558824 7.77778H2.79412C3.10706 7.77778 3.35294 8.02222 3.35294 8.33333V8.88889L1.45294 11.1111H2.79412C3.10706 11.1111 3.35294 11.3556 3.35294 11.6667C3.35294 11.9778 3.10259 12.2222 2.79412 12.2222H0.558824C0.245882 12.2222 0 11.9778 0 11.6667V11.1111L1.9 8.88889H0.558824C0.245882 8.88889 0 8.64444 0 8.33333C0 8.02222 0.222412 7.77778 0.558824 7.77778ZM2.79412 20H0.558824C0.410614 20 0.268475 19.9415 0.163676 19.8373C0.058876 19.7331 0 19.5918 0 19.4444C0 19.2971 0.058876 19.1558 0.163676 19.0516C0.268475 18.9474 0.410614 18.8889 0.558824 18.8889H2.23529V18.3333H0.558824C0.410614 18.3333 0.268475 18.2748 0.163676 18.1706C0.058876 18.0664 0 17.9251 0 17.7778C0 17.6304 0.058876 17.4891 0.163676 17.3849C0.268475 17.2808 0.410614 17.2222 0.558824 17.2222H2.23529V16.6667H0.558824C0.410614 16.6667 0.268475 16.6081 0.163676 16.5039C0.058876 16.3998 0 16.2585 0 16.1111C0 15.9638 0.058876 15.8225 0.163676 15.7183C0.268475 15.6141 0.410614 15.5556 0.558824 15.5556H2.79412C2.94233 15.5556 3.08447 15.6141 3.18927 15.7183C3.29407 15.8225 3.35294 15.9638 3.35294 16.1111V19.4444C3.35294 19.5918 3.29407 19.7331 3.18927 19.8373C3.08447 19.9415 2.94233 20 2.79412 20Z"
                  fill="white" />
              </svg>

            </div>
          </button>

          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600"
            @click="editor.chain().focus().indent().run()">
            <div>
              <svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M1.19097 0C0.876091 0 0.574104 0.125111 0.351448 0.347811C0.128792 0.57051 0.00370535 0.872555 0.00370535 1.1875C0.00370535 1.50244 0.128792 1.80449 0.351448 2.02719C0.574104 2.24989 0.876091 2.375 1.19097 2.375H17.8127C18.1276 2.375 18.4296 2.24989 18.6523 2.02719C18.8749 1.80449 19 1.50244 19 1.1875C19 0.872555 18.8749 0.57051 18.6523 0.347811C18.4296 0.125111 18.1276 0 17.8127 0H1.19097ZM1.19097 4.75C1.03496 4.74972 0.880411 4.7802 0.736177 4.8397C0.591944 4.8992 0.460849 4.98655 0.350388 5.09675C0.239822 5.20706 0.152099 5.3381 0.0922456 5.48237C0.032392 5.62664 0.0015831 5.7813 0.0015831 5.9375C0.0015831 6.0937 0.032392 6.24836 0.0922456 6.39263C0.152099 6.5369 0.239822 6.66794 0.350388 6.77825L3.07161 9.5L0.348805 12.2218C0.238238 12.3321 0.150516 12.4631 0.0906627 12.6074C0.0308091 12.7516 0 12.9063 0 13.0625C0 13.2187 0.0308091 13.3734 0.0906627 13.5176C0.150516 13.6619 0.238238 13.7929 0.348805 13.9033C0.45912 14.0141 0.590236 14.102 0.734623 14.162C0.879011 14.222 1.03383 14.2529 1.19018 14.2529C1.34654 14.2529 1.50135 14.222 1.64574 14.162C1.79013 14.102 1.92124 14.0141 2.03156 13.9033L5.59337 10.3408C5.70393 10.2304 5.79165 10.0994 5.85151 9.95513C5.91136 9.81086 5.94217 9.6562 5.94217 9.5C5.94217 9.3438 5.91136 9.18914 5.85151 9.04487C5.79165 8.9006 5.70393 8.76956 5.59337 8.65925L2.03156 5.09675C1.9211 4.98655 1.79 4.8992 1.64577 4.8397C1.50154 4.7802 1.34699 4.74972 1.19097 4.75ZM9.50185 8.3125C9.18697 8.3125 8.88498 8.43761 8.66233 8.66031C8.43967 8.88301 8.31458 9.18506 8.31458 9.5C8.31458 9.81494 8.43967 10.117 8.66233 10.3397C8.88498 10.5624 9.18697 10.6875 9.50185 10.6875H17.8127C18.1276 10.6875 18.4296 10.5624 18.6523 10.3397C18.8749 10.117 19 9.81494 19 9.5C19 9.18506 18.8749 8.88301 18.6523 8.66031C18.4296 8.43761 18.1276 8.3125 17.8127 8.3125H9.50185ZM1.19097 16.625C0.876091 16.625 0.574104 16.7501 0.351448 16.9728C0.128792 17.1955 0.00370535 17.4976 0.00370535 17.8125C0.00370535 18.1274 0.128792 18.4295 0.351448 18.6522C0.574104 18.8749 0.876091 19 1.19097 19H17.8127C18.1276 19 18.4296 18.8749 18.6523 18.6522C18.8749 18.4295 19 18.1274 19 17.8125C19 17.4976 18.8749 17.1955 18.6523 16.9728C18.4296 16.7501 18.1276 16.625 17.8127 16.625H1.19097Z"
                  fill="white" />
              </svg>

            </div>
          </button>
          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600"
            @click="editor.chain().focus().outdent().run()">
            <div>
              <svg width="19" height="19" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M0 0.95C0 0.698044 0.0834077 0.456408 0.231874 0.278249C0.38034 0.100089 0.581704 0 0.791667 0H18.2083C18.4183 0 18.6197 0.100089 18.7681 0.278249C18.9166 0.456408 19 0.698044 19 0.95C19 1.20196 18.9166 1.44359 18.7681 1.62175C18.6197 1.79991 18.4183 1.9 18.2083 1.9H0.791667C0.581704 1.9 0.38034 1.79991 0.231874 1.62175C0.0834077 1.44359 0 1.20196 0 0.95ZM16.8562 5.0274C17.0048 4.84902 17.2064 4.7488 17.4167 4.7488C17.6269 4.7488 17.8285 4.84902 17.9772 5.0274C18.1258 5.20578 18.2093 5.44773 18.2093 5.7C18.2093 5.95227 18.1258 6.19422 17.9772 6.3726L15.3694 9.5L17.9772 12.6274C18.1258 12.8058 18.2093 13.0477 18.2093 13.3C18.2093 13.5523 18.1258 13.7942 17.9772 13.9726C17.8285 14.151 17.6269 14.2512 17.4167 14.2512C17.2064 14.2512 17.0048 14.151 16.8562 13.9726L13.6895 10.1726C13.6158 10.0844 13.5573 9.97952 13.5174 9.8641C13.4775 9.74869 13.4569 9.62496 13.4569 9.5C13.4569 9.37504 13.4775 9.25131 13.5174 9.1359C13.5573 9.02048 13.6158 8.91565 13.6895 8.8274L16.8562 5.0274ZM0 6.65C0 6.39804 0.0834077 6.15641 0.231874 5.97825C0.38034 5.80009 0.581704 5.7 0.791667 5.7H10.2917C10.5016 5.7 10.703 5.80009 10.8515 5.97825C10.9999 6.15641 11.0833 6.39804 11.0833 6.65C11.0833 6.90196 10.9999 7.14359 10.8515 7.32175C10.703 7.49991 10.5016 7.6 10.2917 7.6H0.791667C0.581704 7.6 0.38034 7.49991 0.231874 7.32175C0.0834077 7.14359 0 6.90196 0 6.65ZM0 12.35C0 12.098 0.0834077 11.8564 0.231874 11.6782C0.38034 11.5001 0.581704 11.4 0.791667 11.4H10.2917C10.5016 11.4 10.703 11.5001 10.8515 11.6782C10.9999 11.8564 11.0833 12.098 11.0833 12.35C11.0833 12.602 10.9999 12.8436 10.8515 13.0218C10.703 13.1999 10.5016 13.3 10.2917 13.3H0.791667C0.581704 13.3 0.38034 13.1999 0.231874 13.0218C0.0834077 12.8436 0 12.602 0 12.35ZM0 18.05C0 17.798 0.0834077 17.5564 0.231874 17.3782C0.38034 17.2001 0.581704 17.1 0.791667 17.1H18.2083C18.4183 17.1 18.6197 17.2001 18.7681 17.3782C18.9166 17.5564 19 17.798 19 18.05C19 18.302 18.9166 18.5436 18.7681 18.7218C18.6197 18.8999 18.4183 19 18.2083 19H0.791667C0.581704 19 0.38034 18.8999 0.231874 18.7218C0.0834077 18.5436 0 18.302 0 18.05Z"
                  fill="white" />
              </svg>

            </div>
          </button>
          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600" @click="addImage">
            <div>
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M5 5.75C5 5.41848 5.1317 5.10054 5.36612 4.86612C5.60054 4.6317 5.91848 4.5 6.25 4.5C6.58152 4.5 6.89946 4.6317 7.13388 4.86612C7.3683 5.10054 7.5 5.41848 7.5 5.75C7.5 6.08152 7.3683 6.39946 7.13388 6.63388C6.89946 6.8683 6.58152 7 6.25 7C5.91848 7 5.60054 6.8683 5.36612 6.63388C5.1317 6.39946 5 6.08152 5 5.75Z"
                  fill="white" />
                <path
                  d="M7.117 0H12.383C13.475 0 14.341 -7.82311e-08 15.038 0.0569999C15.752 0.115 16.355 0.237 16.907 0.517C17.8006 0.972845 18.527 1.69992 18.982 2.594C19.263 3.144 19.385 3.748 19.443 4.462C19.5 5.159 19.5 6.025 19.5 7.117V12.383C19.5 13.475 19.5 14.341 19.443 15.038C19.385 15.752 19.263 16.355 18.983 16.907C18.5274 17.8005 17.8007 18.5268 16.907 18.982C16.355 19.263 15.752 19.385 15.038 19.443C14.341 19.5 13.475 19.5 12.383 19.5H7.117C6.025 19.5 5.159 19.5 4.462 19.443C3.748 19.385 3.145 19.263 2.594 18.983C1.70014 18.5276 0.973414 17.8009 0.518 16.907C0.237 16.355 0.115 15.752 0.0580001 15.038C8.9407e-08 14.341 0 13.475 0 12.383V7.117C0 6.025 -7.82311e-08 5.159 0.0569999 4.462C0.115 3.748 0.237 3.145 0.517 2.594C0.972675 1.69999 1.69977 0.973244 2.594 0.518C3.144 0.237 3.748 0.115 4.462 0.0569999C5.159 -7.82311e-08 6.025 0 7.117 0ZM1.5 11.503V12.35C1.5 13.483 1.5 14.287 1.552 14.916C1.602 15.536 1.699 15.921 1.854 16.226C2.16556 16.8374 2.66263 17.3344 3.274 17.646C3.579 17.801 3.964 17.897 4.584 17.948C4.973 17.98 5.429 17.992 5.988 17.997C5.942 16.605 6.155 15.287 6.581 14.077C5.461 12.471 3.6 11.436 1.5 11.503ZM18.001 8.419C12.138 7.926 7.274 12.293 7.49 18H12.35C13.483 18 14.287 18 14.916 17.948C15.536 17.898 15.921 17.801 16.226 17.646C16.8374 17.3344 17.3344 16.8374 17.646 16.226C17.801 15.921 17.897 15.536 17.948 14.916C18 14.286 18 13.482 18 12.35L18.001 8.419ZM3.5 5.75C3.5 6.47935 3.78973 7.17882 4.30546 7.69454C4.82118 8.21027 5.52065 8.5 6.25 8.5C6.97935 8.5 7.67882 8.21027 8.19454 7.69454C8.71027 7.17882 9 6.47935 9 5.75C9 5.02065 8.71027 4.32118 8.19454 3.80546C7.67882 3.28973 6.97935 3 6.25 3C5.52065 3 4.82118 3.28973 4.30546 3.80546C3.78973 4.32118 3.5 5.02065 3.5 5.75ZM5 5.75C5 5.41848 5.1317 5.10054 5.36612 4.86612C5.60054 4.6317 5.91848 4.5 6.25 4.5C6.58152 4.5 6.89946 4.6317 7.13388 4.86612C7.3683 5.10054 7.5 5.41848 7.5 5.75C7.5 6.08152 7.3683 6.39946 7.13388 6.63388C6.89946 6.8683 6.58152 7 6.25 7C5.91848 7 5.60054 6.8683 5.36612 6.63388C5.1317 6.39946 5 6.08152 5 5.75Z"
                  fill="white" />
              </svg>

            </div>
          </button>
          <button class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600" @click="open = true">
            <div>
              <svg width="21" height="15" viewBox="0 0 21 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M13.6667 5.33333L18.4726 2.86767C18.6335 2.78515 18.8123 2.7462 18.9919 2.75451C19.1716 2.76281 19.3462 2.8181 19.4993 2.91512C19.6523 3.01214 19.7786 3.14768 19.8662 3.30888C19.9539 3.47007 19.9999 3.65158 20 3.83617V11.1638C19.9999 11.3484 19.9539 11.5299 19.8662 11.6911C19.7786 11.8523 19.6523 11.9879 19.4993 12.0849C19.3462 12.1819 19.1716 12.2372 18.9919 12.2455C18.8123 12.2538 18.6335 12.2148 18.4726 12.1323L13.6667 9.66667V5.33333ZM1 3.16667C1 2.59203 1.22242 2.04093 1.61833 1.6346C2.01424 1.22827 2.55121 1 3.11111 1H11.5556C12.1155 1 12.6524 1.22827 13.0483 1.6346C13.4442 2.04093 13.6667 2.59203 13.6667 3.16667V11.8333C13.6667 12.408 13.4442 12.9591 13.0483 13.3654C12.6524 13.7717 12.1155 14 11.5556 14H3.11111C2.55121 14 2.01424 13.7717 1.61833 13.3654C1.22242 12.9591 1 12.408 1 11.8333V3.16667Z"
                  stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>

            </div>
          </button>
          <button @click.stop="setImageFloat(editor, 'left')"
            class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600">Align Left</button>
          <button @click.stop="setImageFloat(editor, 'right')"
            class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600">Align Right</button>
          <button @click.stop="setImageFloat(editor, 'none')"
            class="bg-gray-500 p-1 rounded-sm cursor-pointer hover:bg-gray-600">No Float</button>
        </div>
      </div>
      <!-- Editor -->
      <EditorContent :editor="editor" class="min-h-[250px]" />
    </div>
  </div>

  <TeleportModal :show="open" @close="open = false">
    <ManageVideo @selectvid="addVideo"></ManageVideo>
  </TeleportModal>
</template>

<script setup>
import { EditorContent, useEditor } from '@tiptap/vue-3'
import Document from '@tiptap/extension-document'
import Text from '@tiptap/extension-text'
import Bold from '@tiptap/extension-bold'
import Italic from '@tiptap/extension-italic'
import TextAlign from '@tiptap/extension-text-align'
import ListItem from '@tiptap/extension-list-item'
import HardBreak from '@tiptap/extension-hard-break'
import { Dropcursor } from '@tiptap/extension-dropcursor'
import { computed, onBeforeUnmount, ref } from 'vue'

// Custom extensions
import { CustomHeading } from '@/extensions/CustomHeading'
import { CustomBulletList, CustomOrderedList } from '@/extensions/CustomLists'
import { IndentParagraph } from '@/extensions/IndentParagraph'
import { CustomTextStyle } from '@/extensions/CustomTextStyle'
import { CustomVideo } from '@/extensions/Video'
import TeleportModal from './TeleportModal.vue'
import ManageVideo from './ManageVideo.vue'
import ImageResize from 'tiptap-extension-resize-image'
import { CustomResizeImage } from '@/extensions/FloatingResizeImage'

const props = defineProps({
  modelValue: {
    type: [String, Object],
    default: "",
  },
})

const open = ref(false);
// Options
const fontSizes = ['12px', '14px', '16px', '20px', '24px']
const lineHeights = ['1', '1.5', '2', '2.5']

const emit = defineEmits(['update:modelValue'])


const currentFontSize = computed(() => {
  if (!editor.value) return null
  const attrs = editor.value.getAttributes('textStyle')
  return attrs.fontSize || ''
})

const currentLineHeight = computed(() => {
  if (!editor.value) return null
  const attrs = editor.value.getAttributes('textStyle')
  return attrs.lineHeight || ''
})

// Handlers
function setFontSize(size) {
  editor.value.chain().focus().setMark('textStyle', { fontSize: size }).run()
}

function setLineHeight(lh) {
  editor.value.chain().focus().setMark('textStyle', { lineHeight: lh }).run()
}

function alignRight() {
  editor.value.chain().focus().setTextAlign('right').run()
}

function addImage() {

  const input = document.createElement('input')
  input.type = 'file'
  input.accept = 'image/*'

  input.onchange = (event) => {
    const file = event.target.files[0]
    if (!file) return

    const reader = new FileReader()
    reader.onload = (e) => {
      const base64 = e.target.result
      editor.value.chain().focus().setImage({ src: base64 }).run()
    }

    reader.readAsDataURL(file)
  }

  // Trigger the file selector
  input.click()
}

async function addVideo(vid) {
  const url = vid.video_url
  editor.value.chain().focus().setVideo({ src: url }).run()
  open.value = false;
}


// Create the editor instance
const editor = useEditor({
  editorProps: {
    attributes: {
      class: 'p-4 focus:outline-none',
    },
  },
  extensions: [
    Document,
    HardBreak,
    Text,
    Bold,
    Italic,
    CustomResizeImage.configure({
      inline: true
    }),
    Dropcursor,
    ListItem,
    CustomBulletList,
    CustomOrderedList,
    IndentParagraph,
    CustomTextStyle,
    CustomVideo,
    CustomHeading.configure({ levels: [1, 2, 3] }),
    TextAlign.configure({ types: ['heading', 'paragraph'] }),
  ],
  content: props.modelValue,
  onUpdate: ({ editor }) => {

    // emit('update:modelValue', editor.getHTML())
    // If JSON needed:

    emit('update:modelValue', JSON.stringify(editor.getJSON().content))
    // Auto-generate heading IDs
    editor.state.doc.descendants((node, pos) => {
      if (node.type.name === 'heading') {
        const text = node.textContent

        const id = `h${node.attrs.level}-${encodeURIComponent(
          text.toLowerCase().replace(/\s+/g, '-'),
        )}`

        if (node.attrs.id !== id) {
          editor.commands.command(({ tr }) => {
            tr.setNodeMarkup(pos, undefined, {
              ...node.attrs,
              id,
            })
            return true
          })
        }
      }
    })
  },
})

function setImageFloat(editor, floatDirection) {
  if (editor.isActive('image')) {
    editor
      .chain()
      .focus()
      .updateAttributes('image', { class: `float-${floatDirection}` })
      .run();
  }
}

// Cleanup
onBeforeUnmount(() => {
  if (editor.value) {
    editor.value.destroy()
  }
})
</script>

<style>
.is-active {
  background-color: gray;
}

.tiptap .ProseMirror {
  padding: 1rem;
  /* inner spacing */
  min-height: 200px;
  /* optional: give some height */
  outline: none;
  /* remove default focus outline */
}

.tiptap {
  :first-child {
    margin-top: 0;
  }
}
</style>
