<template>
    <div class="mt-8 md:my-12 mx-4 md:mx-[96px] lg:mx-[240px]">
        <div class="flex gap-4">
            <div>
                <RouterLink to="/Articles">
                    <!-- back icon -->
                    <svg width="33" height="33" viewBox="0 0 33 33" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g filter="url(#filter0_d_84_3885)">
                            <rect x="1" y="1" width="29" height="29" rx="14.5" fill="white"
                                shape-rendering="crispEdges" />
                            <rect x="1.5" y="1.5" width="28" height="28" rx="14" stroke="#CCCCCC"
                                shape-rendering="crispEdges" />
                            <path
                                d="M15.5 12.4267V9.96241C15.4997 9.7721 15.4409 9.58613 15.331 9.42796C15.2211 9.26978 15.065 9.14646 14.8825 9.07355C14.7 9.00064 14.4991 8.98139 14.3052 9.01824C14.1113 9.05508 13.9331 9.14637 13.793 9.2806L7.5 15.2589L13.793 21.2363C13.8857 21.3261 13.9958 21.3973 14.1171 21.4459C14.2385 21.4945 14.3686 21.5195 14.5 21.5195C14.6314 21.5195 14.7615 21.4945 14.8829 21.4459C15.0042 21.3973 15.1143 21.3261 15.207 21.2363C15.3945 21.0558 15.4999 20.8109 15.5 20.5555V18.1586C18.25 18.224 21.255 18.7036 23.5 22V21.037C23.5 16.5754 20 12.9063 15.5 12.4267Z"
                                fill="#343434" />
                        </g>
                        <defs>
                            <filter id="filter0_d_84_3885" x="0" y="0" width="33" height="33"
                                filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                                <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                <feColorMatrix in="SourceAlpha" type="matrix"
                                    values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha" />
                                <feOffset dx="1" dy="1" />
                                <feGaussianBlur stdDeviation="1" />
                                <feComposite in2="hardAlpha" operator="out" />
                                <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                                <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_84_3885" />
                                <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_84_3885"
                                    result="shape" />
                            </filter>
                        </defs>
                    </svg>
                </RouterLink>

            </div>

            <div class="flex gap-[8px] items-center">
                <!-- nav bar home + policies -->
                <div class="w-4 h-4">
                    <!-- home icon -->
                    <svg class="w-full h-full" viewBox="0 0 27 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M25.4667 7.40058L25.5067 7.43258C26.2227 7.98324 26.6667 8.83658 26.6667 9.77524V24.7832C26.6688 25.3799 26.5531 25.9711 26.3262 26.523C26.0993 27.0748 25.7658 27.5765 25.3446 27.9991C24.9234 28.4218 24.423 28.7572 23.8719 28.986C23.3208 29.2148 22.73 29.3326 22.1334 29.3326H4.53336C3.93669 29.3326 3.34588 29.2148 2.79483 28.986C2.24377 28.7572 1.74331 28.4218 1.32214 27.9991C0.900972 27.5765 0.567383 27.0748 0.340505 26.523C0.113626 25.9711 -0.00207767 25.3799 2.82379e-05 24.7832V9.77524C2.82379e-05 8.83658 0.444028 7.98324 1.16003 7.43258L1.19869 7.40191L11.5854 0.559245C12.0855 0.195773 12.6878 0 13.306 0C13.9243 0 14.5266 0.195773 15.0267 0.559245L25.4667 7.40058ZM10.6667 15.9992V26.6659H8.00003V15.7326C8.00003 14.4099 9.07736 13.3326 10.4 13.3326H16.2667C17.5894 13.3326 18.6667 14.4099 18.6667 15.7326V26.6659H16V15.9992H10.6667Z"
                            fill="#343434" />
                    </svg>
                </div>
                <div class="w-4 h-4">
                    <!-- right arrow -->
                    <svg class="w-full h-full" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M6.38909 0.1922C6.18752 0.1922 5.98125 0.271887 5.82656 0.426575C5.51719 0.73595 5.51719 1.2422 5.82656 1.55157L16.4156 12.1406L5.98125 22.575C5.67187 22.8844 5.67187 23.3906 5.98125 23.7C6.29062 24.0094 6.79687 24.0094 7.10625 23.7L18.1078 12.7031C18.4172 12.3938 18.4172 11.8875 18.1078 11.5781L6.95625 0.426575C6.79688 0.2672 6.59534 0.1922 6.38909 0.1922Z"
                            fill="#343434" />
                    </svg>
                </div>

                <div>
                    <h3 class="text-[#343434] text-[14px]">Articles</h3>
                </div>
            </div>
        </div>

    </div>
    <div class="mx-4 md:mx-[96px] lg:mx-[240px]">
        <motion.div v-if="article.content" :initial="{ opacity: 0, y: 20 }" :animate="{ opacity: 1, y: 0 }"
            :transition="{ duration: 0.5, ease: 'easeOut' }" class="">
            <!-- Session title -->
            <div class="pl-3 border-l-3 border-[#F94B65] md:mt-12 lg:mt-16 my-8 md:mb-8 lg:mb-12">
                <h3 class="text-[20px] text-gray-700 font-semibold">
                    {{ article.title }}
                </h3>
            </div>
            <div class="flex gap-2 text-[#F94B65] text-small justify-between items-center font-semibold">
                <div class="flex gap-2 text-[#383838] justify-end items-center font-semibold">
                    <div>
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M5.16665 1.66602C5.16665 1.53341 5.11397 1.40623 5.02021 1.31246C4.92644 1.21869 4.79926 1.16602 4.66665 1.16602C4.53404 1.16602 4.40687 1.21869 4.3131 1.31246C4.21933 1.40623 4.16665 1.53341 4.16665 1.66602V2.71935C3.20665 2.79602 2.57732 2.98402 2.11465 3.44735C1.65132 3.91002 1.46332 4.54002 1.38599 5.49935H14.614C14.5367 4.53935 14.3487 3.91002 13.8853 3.44735C13.4227 2.98402 12.7927 2.79602 11.8333 2.71868V1.66602C11.8333 1.53341 11.7806 1.40623 11.6869 1.31246C11.5931 1.21869 11.4659 1.16602 11.3333 1.16602C11.2007 1.16602 11.0735 1.21869 10.9798 1.31246C10.886 1.40623 10.8333 1.53341 10.8333 1.66602V2.67468C10.39 2.66602 9.89265 2.66602 9.33332 2.66602H6.66665C6.10732 2.66602 5.60999 2.66602 5.16665 2.67468V1.66602Z"
                                fill="#383838" />
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M1.33325 8C1.33325 7.44067 1.33325 6.94333 1.34192 6.5H14.6579C14.6666 6.94333 14.6666 7.44067 14.6666 8V9.33333C14.6666 11.8473 14.6666 13.1047 13.8853 13.8853C13.1039 14.666 11.8473 14.6667 9.33325 14.6667H6.66658C4.15259 14.6667 2.89525 14.6667 2.11459 13.8853C1.33392 13.104 1.33325 11.8473 1.33325 9.33333V8ZM11.3333 9.33333C11.5101 9.33333 11.6796 9.2631 11.8047 9.13807C11.9297 9.01305 11.9999 8.84348 11.9999 8.66667C11.9999 8.48986 11.9297 8.32029 11.8047 8.19526C11.6796 8.07024 11.5101 8 11.3333 8C11.1564 8 10.9869 8.07024 10.8618 8.19526C10.7368 8.32029 10.6666 8.48986 10.6666 8.66667C10.6666 8.84348 10.7368 9.01305 10.8618 9.13807C10.9869 9.2631 11.1564 9.33333 11.3333 9.33333ZM11.3333 12C11.5101 12 11.6796 11.9298 11.8047 11.8047C11.9297 11.6797 11.9999 11.5101 11.9999 11.3333C11.9999 11.1565 11.9297 10.987 11.8047 10.8619C11.6796 10.7369 11.5101 10.6667 11.3333 10.6667C11.1564 10.6667 10.9869 10.7369 10.8618 10.8619C10.7368 10.987 10.6666 11.1565 10.6666 11.3333C10.6666 11.5101 10.7368 11.6797 10.8618 11.8047C10.9869 11.9298 11.1564 12 11.3333 12ZM8.66658 8.66667C8.66658 8.84348 8.59635 9.01305 8.47132 9.13807C8.3463 9.2631 8.17673 9.33333 7.99992 9.33333C7.82311 9.33333 7.65354 9.2631 7.52851 9.13807C7.40349 9.01305 7.33325 8.84348 7.33325 8.66667C7.33325 8.48986 7.40349 8.32029 7.52851 8.19526C7.65354 8.07024 7.82311 8 7.99992 8C8.17673 8 8.3463 8.07024 8.47132 8.19526C8.59635 8.32029 8.66658 8.48986 8.66658 8.66667ZM8.66658 11.3333C8.66658 11.5101 8.59635 11.6797 8.47132 11.8047C8.3463 11.9298 8.17673 12 7.99992 12C7.82311 12 7.65354 11.9298 7.52851 11.8047C7.40349 11.6797 7.33325 11.5101 7.33325 11.3333C7.33325 11.1565 7.40349 10.987 7.52851 10.8619C7.65354 10.7369 7.82311 10.6667 7.99992 10.6667C8.17673 10.6667 8.3463 10.7369 8.47132 10.8619C8.59635 10.987 8.66658 11.1565 8.66658 11.3333ZM4.66658 9.33333C4.8434 9.33333 5.01297 9.2631 5.13799 9.13807C5.26301 9.01305 5.33325 8.84348 5.33325 8.66667C5.33325 8.48986 5.26301 8.32029 5.13799 8.19526C5.01297 8.07024 4.8434 8 4.66658 8C4.48977 8 4.3202 8.07024 4.19518 8.19526C4.07016 8.32029 3.99992 8.48986 3.99992 8.66667C3.99992 8.84348 4.07016 9.01305 4.19518 9.13807C4.3202 9.2631 4.48977 9.33333 4.66658 9.33333ZM4.66658 12C4.8434 12 5.01297 11.9298 5.13799 11.8047C5.26301 11.6797 5.33325 11.5101 5.33325 11.3333C5.33325 11.1565 5.26301 10.987 5.13799 10.8619C5.01297 10.7369 4.8434 10.6667 4.66658 10.6667C4.48977 10.6667 4.3202 10.7369 4.19518 10.8619C4.07016 10.987 3.99992 11.1565 3.99992 11.3333C3.99992 11.5101 4.07016 11.6797 4.19518 11.8047C4.3202 11.9298 4.48977 12 4.66658 12Z"
                                fill="#383838" />
                        </svg>

                    </div>

                    <span class="text-sm">{{ article.date }}</span>
                </div>
                <div class="flex gap-2 text-[#F94B65] text-small justify-end items-center font-semibold">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M8.39533 15.5056L8.38799 15.507L8.34066 15.5303L8.32733 15.533L8.31799 15.5303L8.27066 15.507C8.26355 15.5047 8.25821 15.5058 8.25466 15.5103L8.25199 15.517L8.24066 15.8023L8.24399 15.8156L8.25066 15.8243L8.31999 15.8736L8.32999 15.8763L8.33799 15.8736L8.40733 15.8243L8.41533 15.8136L8.41799 15.8023L8.40666 15.5176C8.40488 15.5105 8.4011 15.5065 8.39533 15.5056ZM8.57199 15.4303L8.56333 15.4316L8.43999 15.4936L8.43333 15.5003L8.43133 15.5076L8.44333 15.7943L8.44666 15.8023L8.45199 15.807L8.58599 15.869C8.59444 15.8712 8.60088 15.8694 8.60533 15.8636L8.60799 15.8543L8.58533 15.445C8.5831 15.437 8.57866 15.4321 8.57199 15.4303ZM8.09533 15.4316C8.09239 15.4298 8.08888 15.4293 8.08552 15.43C8.08217 15.4308 8.07923 15.4328 8.07733 15.4356L8.07333 15.445L8.05066 15.8543C8.0511 15.8623 8.05488 15.8676 8.06199 15.8703L8.07199 15.869L8.20599 15.807L8.21266 15.8016L8.21533 15.7943L8.22666 15.5076L8.22466 15.4996L8.21799 15.493L8.09533 15.4316Z"
                            fill="#F94B65" />
                        <path
                            d="M9.52996 3.31938L12.6793 6.46938C12.8638 6.65387 12.9902 6.88846 13.0427 7.14407C13.0952 7.39968 13.0715 7.66508 12.9746 7.90738L11.398 11.8494C11.3095 12.07 11.1637 12.2631 10.9755 12.4084C10.7874 12.5538 10.5638 12.6462 10.328 12.676L6.94196 13.0994C6.85485 13.1096 6.76374 13.122 6.66863 13.1367L6.37263 13.1847L6.21796 13.2127L5.73596 13.306L5.40596 13.376L4.9093 13.488L4.27263 13.64L3.23796 13.904L2.8073 14.02C2.69861 14.0499 2.58417 14.052 2.47445 14.0262C2.36473 14.0004 2.26326 13.9474 2.17933 13.8722C2.0954 13.7969 2.0317 13.7018 1.99407 13.5956C1.95644 13.4893 1.94609 13.3753 1.96396 13.264L1.98663 13.1667L2.1833 12.4254L2.3593 11.7267L2.5113 11.09L2.62263 10.5934L2.69263 10.2627L2.78663 9.78138L2.83996 9.47671L2.88263 9.19138L3.32263 5.67138C3.35257 5.43545 3.44508 5.21182 3.59055 5.02368C3.73602 4.83554 3.92917 4.68974 4.14996 4.60138L8.09196 3.02471C8.33426 2.92782 8.59965 2.90416 8.85527 2.95666C9.11088 3.00915 9.34547 3.13483 9.52996 3.31938ZM7.05663 7.05604C6.8882 7.22458 6.76801 7.43518 6.70857 7.66591C6.64913 7.89665 6.6526 8.1391 6.71863 8.36804C6.67003 8.3965 6.62523 8.43099 6.5853 8.47071L3.87996 11.176C3.86223 11.194 3.84998 11.2167 3.84463 11.2414L3.7853 11.498L3.66663 11.9934L3.6093 12.2274C3.60343 12.2499 3.60355 12.2735 3.60964 12.296C3.61573 12.3184 3.62759 12.3389 3.64403 12.3553C3.66048 12.3718 3.68093 12.3836 3.70337 12.3897C3.72582 12.3958 3.74946 12.3959 3.77196 12.39L4.24996 12.2734L4.75863 12.1547C4.78315 12.1491 4.80557 12.1366 4.8233 12.1187L7.52863 9.41338C7.5683 9.37365 7.6028 9.32908 7.6313 9.28071C7.85719 9.34565 8.09625 9.34972 8.32423 9.29251C8.5522 9.2353 8.76101 9.11883 8.92947 8.95492C9.09794 8.79101 9.22009 8.58548 9.28353 8.35916C9.34697 8.13283 9.34945 7.89376 9.29073 7.66617C9.23201 7.43857 9.11416 7.23054 8.94914 7.06317C8.78412 6.89579 8.57778 6.77501 8.35104 6.71307C8.1243 6.65113 7.88522 6.65023 7.65802 6.71046C7.43082 6.77069 7.22358 6.88991 7.0573 7.05604H7.05663ZM10.162 2.06671C10.2767 1.95183 10.4294 1.88275 10.5914 1.87244C10.7534 1.86213 10.9136 1.91129 11.042 2.01071L11.1046 2.06671L13.9333 4.89471C14.0541 5.0144 14.1247 5.17576 14.1304 5.34574C14.1362 5.51573 14.0768 5.68149 13.9643 5.8091C13.8519 5.93671 13.6949 6.01651 13.5255 6.03218C13.3562 6.04785 13.1872 5.99819 13.0533 5.89338L12.99 5.83738L10.162 3.00938C10.037 2.88436 9.96677 2.71482 9.96677 2.53804C9.96677 2.36127 10.037 2.19173 10.162 2.06671Z"
                            fill="#F94B65" />
                    </svg>


                    <span>Article</span>
                </div>

            </div>
            <div v-html="article.content" class="mb-6"></div>

            <slot></slot>
        </motion.div>
        <div v-else class="h-[120px] mt-[96px] flex flex-col items-center justify-center lg:col-span-12 lg:text-center">
            <svg class="h-full animate-spin" viewBox="0 0 68 68" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M34 8.5C48.0817 8.5 59.5 19.9183 59.5 34" stroke="#F94B65" stroke-width="4"
                    stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <h3 class="text-gray-600 text-base md:text-[20px]">Loading ...</h3>
        </div>

    </div>




</template>

<script setup>
import { convertJsonContent } from '@/composible/convertJsonContent';
import { converToHTML } from '@/composible/convertToHTML';
import { useStrategicStore } from '@/stores/strategicStore';
import { motion } from 'motion-v';
import { onMounted, ref } from 'vue';
import { useRoute } from 'vue-router';

const route = useRoute();
const article = ref({
    title: "",
    content: "",
    date: "",
    author: "",
})


const strategicStore = useStrategicStore();
onMounted(async () => {
    await strategicStore.fetchArticle(route.params.id).then(res => {
        if (res.status === 200) {
            article.value.content = converToHTML(convertJsonContent(res.data.article.content_eng));
            article.value.title = res.data.article.title_eng;
            article.value.date = res.data.article.date;
            article.value.author = res.data.article.author;
        }
    })
})

</script>

<style scoped>
p,
span,
h1,
h2,
h3 {
    text-align: justify;
}

p {
    line-height: 32px !important;
}

span {
    line-height: 32px;

}
</style>